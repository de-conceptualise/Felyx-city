<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Felyx City</title>
        <meta name="description" content="Felyx City">
        <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>
        <script async src="https://ga.jspm.io/npm:es-module-shims@1.7.1/dist/es-module-shims.js"></script>
        <style>
            model-viewer {
                position: absolute;
                display: none;
                width: 400px;
                height: 400px;
                z-index: 0;
            }
            model-viewer::part(default-progress-bar){
                width: 0%;
            }

            body {
                overflow: hidden;
            } 

            body, button, #counterDisplay, a {
                font-family: 'Arial', sans-serif; /* Example: Arial, or any preferred sans-serif font */
            }
            html {
                background-color: black;
                overflow: hidden;
            }

            button {
                -webkit-appearance: none;
                -moz-appearance: none;
                appearance: none;
                padding: 1vw; /* Responsive padding */
                font-size: 1.5vw; /* Responsive font size */
                background: #337c59; /* Example button color */
                color: white; /* Text color */
                border: none; /* Remove border */
                cursor: pointer; /* Pointer cursor on hover */
                border-radius: 2vw;
            }

            @media (max-width: 600px) {
                button, #counterDisplay, a, #showModelBtn, #resetBtn {
                    font-size: 6vw; /* Larger font size for smaller screens */
                }
            }

            @media (min-width: 601px) and (max-width: 900px) {
                button, #counterDisplay, a,  #showModelBtn, #resetBtn {
                    font-size: 4vw; /* Adjust for tablets */
                }
            }

            #counterDisplay, a,  #showModelBtn, #resetBtn {
                font-size: 2vw; /* Initial responsive font size */
            }

            #counterDisplay {
                font-weight: bold;
                position: fixed;
                bottom: 0;
                right: 0;
                color: #337c59;
                padding: 10px;
                font: non-serif;
            }



            a {
                padding: 10px;
                position: fixed;
                bottom: 0;
                left: 0;
                color: white;
                text-decoration: none;
                color: #337c59;

            }

            #showModelBtn {
                width: 100px; /* Adjust width as needed */
                height: 50px; /* Adjust height as needed */
                z-index: 2;
                position: fixed;
                top:0;
                margin: 10px;
                left: 0;
                background-image: url('public/Felyx-logo-32752_800x675.png'); 
                background-size: contain;
                background-repeat: no-repeat;
    background-position: center;
            }

            #resetBtn {
                z-index: 2;
                position: fixed;
                top:0;
                padding: 2;
                margin: 10px;
                right: 0;           
            }

            }

        </style>
    </head>
    <body>
        <div id="modelViewersContainer"></div>
        <div id="counterDisplay">Felyx deployed: 0</div>
        <a href="https://pedrogilfarias.com/felyx-city/">&#9432;</a>
        <button id="showModelBtn"></button>
        <button id="resetBtn">Reset</button>



        <script>

            const container = document.getElementById('modelViewersContainer');
            let modelsToShow = [];
            let counter = 0; // Initialize the counter

            for (let i = 0; i < 200; i++) {
                const modelViewer = document.createElement('model-viewer');
                modelViewer.setAttribute('style', 'display: none; position: absolute;');
                modelViewer.setAttribute('src', 'public/Felyx.glb');
                modelViewer.setAttribute('auto-rotate', '');
                modelViewer.setAttribute('auto-rotate-delay', '0');
                const randomRotationSpeed = Math.floor(Math.random() * 720) - 360; // This now includes negative values
                modelViewer.setAttribute('rotation-per-second', `${randomRotationSpeed}deg`);
                modelViewer.setAttribute('camera-controls', '');
                modelViewer.setAttribute('disable-zoom', '');
                modelViewer.setAttribute('touch-action', 'none');
                container.appendChild(modelViewer);
                modelsToShow.push(modelViewer);
            }

            function handleClick() {
                if (modelsToShow.length > 0) {
                    const modelViewer = modelsToShow.shift();
                    const modelWidth = 400; // Correct width
                    const modelHeight = 400; // Correct height
                    const maxWidth = window.innerWidth - modelWidth; // Prevents overflow on the x-axis
                    const maxHeight = window.innerHeight - modelHeight; // Prevents overflow on the y-axis
                    const randomX = Math.max(0, Math.floor(Math.random() * maxWidth));
                    const randomY = Math.max(0, Math.floor(Math.random() * maxHeight));
                    modelViewer.style.left = `${randomX}px`;
                    modelViewer.style.top = `${randomY}px`;
                    modelViewer.style.display = 'block';

                    // Increment and display the counter
                    counter++;
                    document.getElementById('counterDisplay').textContent = `Felyx Deployed: ${counter}`;

                    // Ensure the modelViewer is shown
                    modelViewer.style.display = 'block';

                };
            }
            document.getElementById('showModelBtn').addEventListener('click', handleClick);

            document.getElementById('resetBtn').addEventListener('click', function() {
                // Reset logic here
                // For example, remove all model-viewer elements from the container
                const container = document.getElementById('modelViewersContainer');
                while (container.firstChild) {
                    container.removeChild(container.firstChild);
                }
                // Reset the modelsToShow array and counter
                modelsToShow = [];
                counter = 0;
                document.getElementById('counterDisplay').textContent = `Felyx deployed: ${counter}`;
                // Optionally, repopulate modelsToShow array if you plan to add models again
                modelsToShow = [];
                for (let i = 0; i < 200; i++) {
                    const modelViewer = document.createElement('model-viewer');
                    modelViewer.setAttribute('style', 'display: none; position: absolute;');
                    modelViewer.setAttribute('src', 'public/Felyx.glb');
                    modelViewer.setAttribute('auto-rotate', '');
                    modelViewer.setAttribute('auto-rotate-delay', '0');
                    const randomRotationSpeed = Math.floor(Math.random() * 720) - 360; // This now includes negative values
                    modelViewer.setAttribute('rotation-per-second', `${randomRotationSpeed}deg`);
                    modelViewer.setAttribute('camera-controls', '');
                    modelViewer.setAttribute('disable-zoom', '');
                    modelViewer.setAttribute('touch-action', 'none');
                    container.appendChild(modelViewer);
                    modelsToShow.push(modelViewer);
                }
            });



        </script>



    </body>
</html>
